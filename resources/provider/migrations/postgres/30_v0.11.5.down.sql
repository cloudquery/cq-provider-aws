-- Autogenerated by migration tool on 2022-05-10 15:09:01
-- CHANGEME: Verify or edit this file before proceeding

-- Resource: shield.attacks
DROP TABLE IF EXISTS aws_shield_attack_properties;
DROP TABLE IF EXISTS aws_shield_attack_sub_resources;
DROP TABLE IF EXISTS aws_shield_attacks;

-- Resource: shield.protections
DROP TABLE IF EXISTS aws_shield_protections;

-- Resource: shield.protections_groups
DROP TABLE IF EXISTS aws_shield_protection_groups;

-- Resource: shield.subscriptions
DROP TABLE IF EXISTS aws_shield_subscriptions;

-- Resource: xray.groups
DROP TABLE IF EXISTS aws_xray_groups;

-- Resource: xray.sampling_rules
DROP TABLE IF EXISTS aws_xray_sampling_rules;

-- aws_redshift_snapshots
ALTER TABLE IF EXISTS aws_redshift_snapshots DROP CONSTRAINT aws_redshift_snapshots_cluster_cq_id_fkey;
ALTER TABLE IF EXISTS aws_redshift_snapshots
    ADD CONSTRAINT aws_redshift_snapshots_cluster_cq_id_fkey
        FOREIGN KEY (cluster_cq_id)
            REFERENCES aws_redshift_clusters(cq_id);

-- Resource: rds.instances
TRUNCATE TABLE aws_rds_instances CASCADE;
ALTER TABLE IF EXISTS aws_rds_instances DROP CONSTRAINT aws_rds_instances_pk;
ALTER TABLE IF EXISTS aws_rds_instances ADD CONSTRAINT aws_rds_instances_pk PRIMARY KEY (account_id,id);

-- Resource: ssm.instances
TRUNCATE TABLE aws_ssm_instance_compliance_items CASCADE;
ALTER TABLE IF EXISTS aws_ssm_instance_compliance_items DROP CONSTRAINT aws_ssm_instance_compliance_items_pk;
ALTER TABLE IF EXISTS aws_ssm_instance_compliance_items ADD CONSTRAINT aws_ssm_instance_compliance_items_pk PRIMARY KEY (instance_cq_id,resource_id,id);
